# ××§×•×¨×•×ª × ×ª×•× ×™× ×œ×™×©×•×‘×™× ×‘×™×©×¨××œ ×¢× ×§×•××•×¨×“×™× ×˜×•×ª

××¡××š ×–×” ××ª××¨ ××ª ×”××§×•×¨×•×ª ×”×˜×•×‘×™× ×‘×™×•×ª×¨ ×œ×™×¦×™×¨×ª ×¨×©×™××” ××§×™×¤×” ×©×œ ×›×œ ×”×™×©×•×‘×™× ×‘×™×©×¨××œ ×›×•×œ×œ ×§×•××•×¨×“×™× ×˜×•×ª ×’×™××•×’×¨×¤×™×•×ª.

## ğŸ¯ ××§×•×¨×•×ª ××•××œ×¦×™× (×œ×¤×™ ×¡×“×¨ ×¢×“×™×¤×•×ª)

### 1. **×××’×¨ ×”× ×ª×•× ×™× ×”×¤×ª×•×— ×©×œ ×™×©×¨××œ (odata.org.il)** â­ ××•××œ×¥ ×‘×™×•×ª×¨
- **×§×™×©×•×¨**: https://www.odata.org.il/dataset/ac1ae1fa-6d43-4685-8434-9953e950ca9b
- **×ª×™××•×¨**: ×××’×¨ ×›×ª×•×‘×•×ª ×‘×™×©×¨××œ ×¢× ×§×•××•×¨×“×™× ×˜×•×ª
- **×™×ª×¨×•× ×•×ª**:
  - ××¢×œ ×—×¦×™ ××™×œ×™×•×Ÿ ×›×ª×•×‘×•×ª
  - ×›×•×œ×œ ×§×•××•×¨×“×™× ×˜×•×ª ×’×™××•×’×¨×¤×™×•×ª ××“×•×™×§×•×ª
  - × ×ª×•× ×™× ×¨×©××™×™× ×•××¢×•×“×›× ×™×
  - ×¤×•×¨××˜ Excel/CSV × ×•×— ×œ×¢×™×‘×•×“
  - ×—×™× ××™ ×•×¤×ª×•×—
- **×©×™××•×©**: ×”×•×¨×“×ª ×§×•×‘×¥ Excel/CSV ×•×¢×™×‘×•×“×• ×œ×¨×©×™××ª ×™×©×•×‘×™× ×™×™×—×•×“×™×™×

### 2. **×”×œ×©×›×” ×”××¨×›×–×™×ª ×œ×¡×˜×˜×™×¡×˜×™×§×” (×”×œ×"×¡)**
- **×§×™×©×•×¨**: https://www.cbs.gov.il/he/pages/default.aspx
- **×ª×™××•×¨**: ××§×•×¨ ×¨×©××™ ×œ× ×ª×•× ×™× ×¡×˜×˜×™×¡×˜×™×™× ×¢×œ ×™×©×•×‘×™×
- **×™×ª×¨×•× ×•×ª**:
  - ××§×•×¨ ×¨×©××™ ×•××“×•×™×§
  - × ×ª×•× ×™× ××¢×•×“×›× ×™×
  - ×›×•×œ×œ ×—×œ×•×§×” ×œ××—×•×–×•×ª, × ×¤×•×ª ×•×¦×•×¨×•×ª ×™×™×©×•×‘
- **×—×¡×¨×•× ×•×ª**:
  - ×œ× ×ª××™×“ ×›×•×œ×œ ×§×•××•×¨×“×™× ×˜×•×ª ×™×©×™×¨×•×ª
  - ×“×•×¨×© ×¢×™×‘×•×“ × ×•×¡×£

### 3. **×”××¨×›×– ×œ××™×¤×•×™ ×™×©×¨××œ (××¤"×™)**
- **×§×™×©×•×¨**: https://www.mapi.gov.il/
- **×ª×™××•×¨**: ××™×“×¢ ×’×™××•×’×¨×¤×™ ××¤×•×¨×˜ ×›×•×œ×œ ××¤×•×ª
- **×™×ª×¨×•× ×•×ª**:
  - ××™×“×¢ ×’×™××•×’×¨×¤×™ ××“×•×™×§
  - ××¤×•×ª ××¤×•×¨×˜×•×ª
  - × ×ª×•× ×™× ×¨×©××™×™×
- **×—×¡×¨×•× ×•×ª**:
  - ×œ× ×ª××™×“ × ×’×™×© ×‘×§×œ×•×ª
  - ×“×•×¨×© ×¤× ×™×™×” ×¨×©××™×ª

### 4. **OpenStreetMap / Nominatim API** â­ ××•××œ×¥ ×œ××™××•×©
- **API**: https://nominatim.org/release-docs/latest/api/Overview/
- **×ª×™××•×¨**: ×××’×¨ ××™×“×¢ ×’×™××•×’×¨×¤×™ ×¤×ª×•×— ×¢×•×œ××™
- **×™×ª×¨×•× ×•×ª**:
  - API ×—×™× ××™ (×¢× ×”×’×‘×œ×•×ª)
  - ×›×•×œ×œ ×§×•××•×¨×“×™× ×˜×•×ª ××“×•×™×§×•×ª
  - ×ª××™×›×” ×‘×¢×‘×¨×™×ª
  - × ×™×ª×Ÿ ×œ×—×™×¤×•×© ×œ×¤×™ ×©× ×™×©×•×‘
  - × ×ª×•× ×™× ××¢×•×“×›× ×™×
- **×“×•×’××ª ×©×™××•×©**:
  ```python
  import requests
  import time
  
  def get_coordinates(settlement_name):
      url = "https://nominatim.openstreetmap.org/search"
      params = {
          'q': f"{settlement_name}, Israel",
          'format': 'json',
          'limit': 1,
          'accept-language': 'he'
      }
      headers = {'User-Agent': 'YourApp/1.0'}
      response = requests.get(url, params=params, headers=headers)
      time.sleep(1)  # Respect rate limits
      if response.json():
          result = response.json()[0]
          return {
              'lat': result['lat'],
              'lon': result['lon'],
              'display_name': result['display_name']
          }
      return None
  ```
- **×”×’×‘×œ×•×ª**:
  - ××§×¡×™××•× 1 ×‘×§×©×” ×œ×©× ×™×™×”
  - ×“×•×¨×© User-Agent ×ª×§×™×Ÿ
  - ××•××œ×¥ ×œ×”×©×ª××© ×‘-caching

### 5. **GeoNames API**
- **×§×™×©×•×¨**: http://www.geonames.org/
- **×ª×™××•×¨**: ×××’×¨ ×’×™××•×’×¨×¤×™ ×¢×•×œ××™
- **×™×ª×¨×•× ×•×ª**:
  - ×××’×¨ ×’×“×•×œ ×•××§×™×£
  - API ×—×™× ××™ (×¢× ×”×’×‘×œ×•×ª)
  - ×›×•×œ×œ ×§×•××•×¨×“×™× ×˜×•×ª
- **×—×¡×¨×•× ×•×ª**:
  - ×¤×—×•×ª ××“×•×™×§ ×œ×™×©×¨××œ
  - ×“×•×¨×© API key ×œ×©×™××•×© ××ª×§×“×

### 6. **Google Maps Geocoding API**
- **×§×™×©×•×¨**: https://developers.google.com/maps/documentation/geocoding
- **×ª×™××•×¨**: ×©×™×¨×•×ª geocoding ×©×œ Google
- **×™×ª×¨×•× ×•×ª**:
  - ××“×•×™×§ ×××•×“
  - ×ª××™×›×” ××¢×•×œ×” ×‘×¢×‘×¨×™×ª
  - API × ×•×— ×œ×©×™××•×©
- **×—×¡×¨×•× ×•×ª**:
  - ×“×•×¨×© API key
  - ×¢×œ×•×ª (×œ××—×¨ ×ª×§×•×¤×ª × ×™×¡×™×•×Ÿ)
  - ×”×’×‘×œ×•×ª ×¢×œ ××¡×¤×¨ ×‘×§×©×•×ª

## ğŸ“‹ ×”××œ×¦×” ×œ××™××•×©

### ×©×œ×‘ 1: ××™×¡×•×£ ×¨×©×™××ª ×™×©×•×‘×™×
1. ×”×•×¨×“ ××ª ×§×•×‘×¥ ×”× ×ª×•× ×™× ×-odata.org.il
2. ×—×œ×¥ ×¨×©×™××ª ×™×©×•×‘×™× ×™×™×—×•×“×™×™×
3. ×©××•×¨ ×‘-`metadata/settlements.json`

### ×©×œ×‘ 2: ×”×•×¡×¤×ª ×§×•××•×¨×“×™× ×˜×•×ª
**××¤×©×¨×•×ª ×' - Nominatim (××•××œ×¥)**:
```python
# scripts/enrich_settlements.py
import json
import requests
import time
from typing import Dict, Optional

def enrich_with_coordinates(settlements: list) -> list:
    enriched = []
    for settlement in settlements:
        coords = get_coordinates(settlement)
        enriched.append({
            'name': settlement,
            'lat': coords['lat'] if coords else None,
            'lon': coords['lon'] if coords else None
        })
        time.sleep(1)  # Rate limiting
    return enriched
```

**××¤×©×¨×•×ª ×‘' - Google Maps API**:
- ×“×•×¨×© API key
- ××“×•×™×§ ×™×•×ª×¨ ××‘×œ ×‘×ª×©×œ×•×

### ×©×œ×‘ 3: ×¢×“×›×•×Ÿ ×ª×§×•×¤×ª×™
- ×¢×“×›×Ÿ ××ª ×”×¨×©×™××” ××“×™ ×¨×‘×¢×•×Ÿ
- ×‘×“×•×§ ×©×™× ×•×™×™× ×‘×™×©×•×‘×™× ×—×“×©×™×/×™×©× ×™×
- ×©××•×¨ ×’×¨×¡××•×ª ×§×•×“××•×ª ×œ×’×™×‘×•×™

## ğŸ”§ ×›×œ×™× ××•××œ×¦×™×

1. **Python Libraries**:
   - `requests` - ×œ×‘×™×¦×•×¢ API calls
   - `pandas` - ×œ×¢×™×‘×•×“ ×§×‘×¦×™ CSV/Excel
   - `geopy` - ×œ×¢×™×‘×•×“ ×§×•××•×¨×“×™× ×˜×•×ª

2. **Scripts**:
   - `scripts/download_settlements.py` - ×”×•×¨×“×ª × ×ª×•× ×™× ×-odata.org.il
   - `scripts/enrich_coordinates.py` - ×”×•×¡×¤×ª ×§×•××•×¨×“×™× ×˜×•×ª ×-Nominatim
   - `scripts/validate_settlements.py` - ×‘×“×™×§×ª ×ª×§×™× ×•×ª ×”× ×ª×•× ×™×

## ğŸ“ ××‘× ×” ×§×•×‘×¥ ××•××œ×¥

```json
{
  "settlements": [
    {
      "name": "×’×‘×¨×¢×",
      "name_he": "×’×‘×¨×¢×",
      "name_en": "Gvar'am",
      "lat": 31.4567,
      "lon": 34.5678,
      "region": "×“×¨×•×",
      "district": "××©×§×œ×•×Ÿ",
      "settlement_type": "×§×™×‘×•×¥",
      "population": 1234,
      "last_updated": "2024-11-21"
    }
  ],
  "metadata": {
    "total_count": 1200,
    "source": "odata.org.il + Nominatim",
    "last_updated": "2024-11-21",
    "version": "1.0"
  }
}
```

## âš ï¸ ×©×™××• ×œ×‘

1. **Rate Limiting**: ×›×œ ×”-APIs ××’×‘×™×œ×™× ××ª ××¡×¤×¨ ×”×‘×§×©×•×ª - ×”×©×ª××©×• ×‘-caching
2. **×ª× ××™ ×©×™××•×©**: ×‘×“×§×• ××ª ×ª× ××™ ×”×©×™××•×© ×©×œ ×›×œ ××§×•×¨
3. **×¢×“×›×•× ×™×**: ×™×©×•×‘×™× ×—×“×©×™× × ×•×¦×¨×™× ××“×™ ×¤×¢× - ×¢×“×›× ×• ××ª ×”×¨×©×™××”
4. **×ª×§×™× ×•×ª**: ×‘×“×§×• ×ª×§×™× ×•×ª ×§×•××•×¨×“×™× ×˜×•×ª (×œ××©×œ, ×©×”× ×‘×ª×•×š ×’×‘×•×œ×•×ª ×™×©×¨××œ)

## ğŸ“š ×§×™×©×•×¨×™× ×©×™××•×©×™×™×

- [×××’×¨ ×”× ×ª×•× ×™× ×”×¤×ª×•×— ×©×œ ×™×©×¨××œ](https://www.odata.org.il/)
- [Nominatim API Documentation](https://nominatim.org/release-docs/latest/api/Overview/)
- [GeoNames API](http://www.geonames.org/export/web-services.html)
- [Google Maps Geocoding API](https://developers.google.com/maps/documentation/geocoding)

